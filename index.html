<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ğŸ® Ù„Ø¹Ø¨Ø© Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø£Ø³Ø¦Ù„Ø© â€” Ù†Ø³Ø®Ø© Ù…Ø¨Ø³Ù‘Ø·Ø© Ø¨Ø¯ÙˆÙ† Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</title>
  <style>
    :root{
      --bg:#f0f8ff; --card:#ffffff; --ink:#17223b; --muted:#6b7280; --accent:#10b981; --danger:#ef4444; --brand:#3b82f6; --sky:#aee7ff;
      --shadow:0 15px 30px rgba(23,34,59,.15);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:Cairo,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial,sans-serif;background:var(--bg);color:var(--ink);font-size:2rem}

    /* Ø´Ø§Ø´Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© */
    #start{position:fixed;inset:0;background:linear-gradient(180deg,var(--bg),var(--sky));display:flex;align-items:center;justify-content:center;padding:30px;z-index:1000}
    .start-card{max-width:900px;width:100%;background:#ffffffcc;backdrop-filter:blur(6px);border-radius:30px;box-shadow:var(--shadow);padding:40px;text-align:center}
    .start-title{font-size:3.2rem;margin:0 0 10px}
    .start-sub{color:#0c4a6e;margin:0 0 20px}
    .name-row{display:flex;gap:16px;justify-content:center;flex-wrap:wrap;margin-top:20px}
    .name-row input{font-size:1.8rem;padding:18px 20px;border-radius:16px;border:2px solid #93c5fd;min-width:320px}

    .container{max-width:1600px;margin:auto;padding:40px}
    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:24px}
    h1{font-size:2.4rem;margin:0;display:flex;gap:16px;align-items:center}
    .chip{font-size:1.3rem;padding:10px 18px;border-radius:999px;background:#e0f2ff;color:#0c4a6e}
    .card{background:var(--card);border-radius:28px;box-shadow:var(--shadow);padding:32px}
    .btn{border:0;border-radius:20px;padding:18px 28px;font-weight:700;cursor:pointer;font-size:1.4rem}
    .btn.primary{background:var(--brand);color:#fff}
    .btn.ghost{background:#e0f2ff;color:#0c4a6e}

    /* HUD */
    .hud{display:flex;justify-content:space-between;align-items:center;gap:16px;margin-bottom:20px;font-size:1.4rem}
    .hud .pill{background:#f1f5f9;color:#334155;padding:12px 20px;border-radius:999px;white-space:nowrap}
    .progress{height:18px;background:#e0f2ff;border-radius:999px;overflow:hidden;margin-bottom:20px}
    .progress>div{height:100%;background:linear-gradient(90deg,#34d399,#10b981);width:0%}

    /* Ù„ÙˆØ­ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª */
    #cardBoard{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:20px}
    .qcard{
      position:relative;background:#fff;border-radius:26px;box-shadow:0 12px 28px rgba(15,23,42,.12);
      min-height:260px;display:flex;align-items:center;justify-content:center;cursor:pointer;
      border:5px solid transparent;transition:.25s;
      background-image:radial-gradient( circle at 20% 20%, #e6f3ff 0, transparent 50% ),
                       radial-gradient( circle at 80% 80%, #e9fff6 0, transparent 50% );
    }
    .qcard:hover{transform:translateY(-6px)}
    .qcard.done{opacity:.25;pointer-events:none;transform:none}
    .qcard.correct{border-color:var(--accent)}
    .qcard.wrong{border-color:var(--danger)}
    .qcard .centerMark{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:10px;padding:14px}
    .qcard .centerMark .num{font-size:5.2rem;font-weight:900;line-height:1;color:#0c4a6e;text-shadow:0 4px 12px rgba(2,6,23,.08)}
    .qcard .centerMark img{width:190px;height:170px;object-fit:contain;opacity:.95;filter:drop-shadow(0 6px 14px rgba(2,6,23,.12))}

    /* Ù…ÙˆØ¯Ø§Ù„ Ø§Ù„Ø³Ø¤Ø§Ù„ */
    #qModal{position:fixed;inset:0;background:rgba(15,23,42,.35);display:none;align-items:center;justify-content:center;z-index:1100}
    #qBox{background:#fff;border-radius:26px;box-shadow:var(--shadow);width:min(1020px,95vw);max-height:90vh;overflow:auto}
    #qHead{display:flex;justify-content:space-between;align-items:center;padding:18px 22px;border-bottom:1px solid #e5e7eb}
    #qTitle{font-size:1.4rem;margin:0}
    #qBody{padding:16px 22px}
    .question{font-size:3.6rem;font-weight:900;margin:14px 0 22px;text-align:center;line-height:1.25}

    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:18px}
    .choice{position:relative;border:4px solid transparent;border-radius:18px;background:#ffffff;cursor:pointer;transition:.25s;box-shadow:0 10px 24px rgba(17,24,39,.12);font-size:1.6rem}
    .choice:hover{transform:translateY(-4px)}
    .choice.is-correct{border-color:var(--accent)}
    .choice.is-wrong{border-color:var(--danger)}
    .choice[disabled]{opacity:.5;filter:grayscale(.1);cursor:not-allowed}
    .choice .thumb{height:200px;display:flex;align-items:center;justify-content:center;background:#f8fafc;border-radius:14px 14px 0 0;overflow:hidden}
    .choice .thumb img{max-width:100%;max-height:100%}
    .choice .label{padding:14px 16px;font-weight:700;text-align:center}

    /* Ø§Ù‡ØªØ²Ø§Ø² Ø®Ø·Ø£ */
    @keyframes shakeX {0%,100%{transform:translateX(0)}20%{transform:translateX(-6px)}40%{transform:translateX(6px)}60%{transform:translateX(-4px)}80%{transform:translateX(4px)}}
    .shake{animation:shakeX .35s ease}

    .result{display:none;text-align:center;padding:40px;font-size:1.6rem}
    .result h2{font-size:2.4rem;margin:0 0 20px}
    .stats{display:flex;flex-wrap:wrap;gap:16px;justify-content:center;margin-top:16px}
    .stat{background:#f8fafc;border:2px solid #e0f2ff;border-radius:18px;padding:14px 18px;font-size:1.4rem}

    /* ØµÙˆØ± ÙˆØªØ£Ø«ÙŠØ±Ø§Øª */
    .happy-img, .sad-img {position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); display: none; z-index: 1202; width: min(420px, 70vw); height: auto; max-height: 70vh}
    #clapOverlay{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(240,248,255,.6);z-index:1201}
    #clapOverlay img{width:360px;height:360px;animation:pulse .7s ease-in-out infinite alternate}
    @keyframes pulse{from{transform:scale(.92)}to{transform:scale(1.06)}}

    /* Ù‚ÙˆØ³ Ù‚Ø²Ø­ + Ù†Ø¬ÙˆÙ… */
    #celebrate{pointer-events:none;position:fixed;inset:0;z-index:1200}
    #celebrate #rainbow{position:absolute;left:0;right:0;top:-120vh;height:120vh;opacity:.85;filter:saturate(1.2) blur(1px);background:linear-gradient(180deg,#ff3b30,#ff9500,#ffd60a,#34c759,#64d2ff,#0a84ff,#bf5af2);transform:translateY(-120vh)}
    .rainbow-run{animation:rainbowDrop 1.3s ease-out forwards}
    @keyframes rainbowDrop{0%{transform:translateY(-120vh)}70%{transform:translateY(20vh)}100%{transform:translateY(120vh);opacity:0}}
    .star{position:absolute;font-size:32px;opacity:0;filter:drop-shadow(0 6px 6px rgba(0,0,0,.15));will-change:transform,opacity;}
    @keyframes starFall{0%{transform:translateY(-40px) scale(.6) rotate(0deg);opacity:0}10%{opacity:1}70%{transform:translateY(60vh) scale(1) rotate(160deg)}100%{transform:translateY(100vh) scale(.9) rotate(260deg);opacity:0}}

    /* ÙˆÙ„Ø¯ ÙŠØ±Ù‚Øµ */
    @keyframes dance {0%{transform:translate(-50%,-50%) rotate(0) scale(1)}50%{transform:translate(-50%,-50%) rotate(8deg) scale(1.08)}100%{transform:translate(-50%,-50%) rotate(0) scale(1);opacity:0}}
    .dance-run{animation:dance 1.6s ease-in-out forwards;filter:drop-shadow(0 10px 25px rgba(0,0,0,.18));}

    /* Toast */
    #toast{position:fixed; left:50%; top:24px; transform:translateX(-50%) translateY(-20px); background:#ffffff; color:#0f172a; border:2px solid #e2e8f0; border-radius:16px; padding:12px 18px; box-shadow:0 10px 24px rgba(2,6,23,.12); font-size:3.4rem; z-index:1305; opacity:0; pointer-events:none; display:flex; align-items:center; gap:10px; white-space:nowrap;}
    #toast.ok{border-color:#86efac}
    #toast.err{border-color:#fecaca}
    .toast-show{animation:toastIn .25s ease-out forwards}
    .toast-hide{animation:toastOut .25s ease-in forwards}
    @keyframes toastIn{from{opacity:0; transform:translateX(-50%) translateY(-20px)} to{opacity:1; transform:translateX(-50%) translateY(0)}}
    @keyframes toastOut{from{opacity:1; transform:translateX(-50%) translateY(0)} to{opacity:0; transform:translateX(-50%) translateY(-20px)}}

    @media (max-width:640px){
      body{font-size:1.4rem}
      .container{padding:20px}
      .question{font-size:2.2rem}
      #cardBoard{grid-template-columns:repeat(2,1fr);gap:14px}
      .qcard{min-height:200px}
      .choice .thumb{height:170px}
      .btn{padding:16px 18px;font-size:1.2rem}
      .qcard .centerMark .num{ font-size:3.6rem }
      .qcard .centerMark img{ width:64px; height:64px }
    }

    /* ===== Ù‡Ø¯ÙŠØ© + Ø¨Ø§Ù„ÙˆÙ†Ø§Øª (ØªØ£Ø«ÙŠØ± Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©) ===== */
    #giftOverlay{position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:1600;background:rgba(0,0,0,.35)}
    .gift-wrap{position:relative;width:min(360px,80vw);aspect-ratio:1/1;display:flex;align-items:center;justify-content:center}
    .gift{position:relative;width:72%;height:72%}
    .gift .box{position:absolute;left:50%;top:50%;transform:translate(-50%,-30%);width:100%;height:70%;background:#ff5c5c;border-radius:16px;box-shadow:0 14px 30px rgba(0,0,0,.25) inset;}
    .gift .lid{position:absolute;left:50%;top:20%;transform:translate(-50%,-50%);transform-origin:center bottom;width:108%;height:26%;background:#ff7b7b;border-radius:14px;box-shadow:0 8px 18px rgba(0,0,0,.25);}
    .gift .ribbon-vert{position:absolute;left:50%;top:50%;transform:translate(-50%,-30%);width:14%;height:70%;background:#ffd54f;border-radius:10px;}
    .gift .ribbon-horz{position:absolute;left:50%;top:20%;transform:translate(-50%,-50%);width:108%;height:22%;background:linear-gradient(0deg,#ffd54f,#ffec99);border-radius:12px;}
    @keyframes lidOpen{0%{transform:translate(-50%,-50%) rotateX(0)}60%{transform:translate(-50%,-85%) rotateX(-70deg)}100%{transform:translate(-50%,-120%) rotateX(-110deg)}}
    .gift.open .lid{animation:lidOpen .7s ease-out forwards}
    #balloons{position:absolute;inset:0;overflow:visible;pointer-events:none}
    .balloon{position:absolute;bottom:20%;left:50%;width:48px;height:62px;border-radius:50% 50% 45% 45%;background: radial-gradient(circle at 30% 25%, rgba(255,255,255,.7), transparent 35%), var(--bcol,#ff8a80);box-shadow:0 10px 18px rgba(0,0,0,.18)}
    .balloon::after{content:"";position:absolute;left:50%;bottom:-34px;width:2px;height:36px;background:#555;transform:translateX(-50%);border-radius:2px;opacity:.7}
    @keyframes floatUp{0%{transform:translateY(0) scale(.95);opacity:0}10%{opacity:1}100%{transform:translateY(-90vh) scale(1.05);opacity:0}}
    .balloon.run{animation:floatUp var(--dur,1.8s) cubic-bezier(.22,.8,.26,.99) var(--del,0s) forwards}
    .gifts{position:absolute;left:50%;top:46%;transform:translate(-50%,-50%);font-size:44px;opacity:0;filter:drop-shadow(0 6px 10px rgba(0,0,0,.2))}
    @keyframes popGifts{0%{transform:translate(-50%,-30%) scale(.7);opacity:0}40%{opacity:1}100%{transform:translate(-50%,-150%) scale(1.05);opacity:0}}
    .gifts.run{animation:popGifts 1.1s ease-out forwards}

    /* ===== ØªØ­Ø³ÙŠÙ†Ø§Øª ØªØ¬Ø§ÙˆØ¨ÙŠØ© Ù…Ø¯Ù…Ø¬Ø© (ØºÙŠØ± Ù…ÙƒØ³Ù‘Ø±Ø©) ===== */

    /* Ø´Ø§Ø´Ø§Øª Ø£ØµØºØ± Ø¬Ø¯Ù‹Ø§ (â‰¤ 360px) */
    @media (max-width: 360px){
      body{ font-size:1.2rem }
      .container{ padding:16px }
      .start-card{ padding:20px; border-radius:20px }
      .start-title{ font-size:2.2rem }
      .name-row{ gap:10px }
      .name-row input{ min-width:0; width:100%; font-size:1.2rem; padding:12px 14px }
      .btn{ padding:12px 14px; font-size:1.05rem; border-radius:14px }

      #cardBoard{ grid-template-columns:repeat(2,1fr); gap:10px }
      .qcard{ min-height:160px; border-width:4px }
      .qcard .centerMark .num{ font-size:2.8rem }
      .qcard .centerMark img{ width:56px; height:56px }

      #qBox{ width:96vw; max-height:82vh }
      .question{ font-size:1.9rem }
      .choice{ font-size:1.2rem }
      .choice .thumb{ height:130px }
      .choice .thumb img{ max-width:100%; height:auto }
    }

    /* landscape Ø¹Ù„Ù‰ Ù‡ÙˆØ§ØªÙ Ù‚ØµÙŠØ±Ø© (â‰¤ 540px Ø§Ø±ØªÙØ§Ø¹Ù‹Ø§) */
    @media (max-height: 540px) and (orientation: landscape){
      body{ font-size:1.1rem }
      #start{ align-items:flex-start; padding-top:8px }
      .start-card{ margin-top:8px }
      .container{ padding:16px }
      .hud{ gap:8px; font-size:1.2rem; flex-wrap:wrap }
      .pill{ padding:8px 12px }
      .progress{ height:12px }
      .qcard{ min-height:140px }
      .choice .thumb{ height:110px }
      #qBox{ max-height:78vh }
    }

    /* ØªØ§Ø¨Ù„Øª (640â€“900px): Ø´Ø¨ÙƒØ© 3 Ø£Ø¹Ù…Ø¯Ø© */
    @media (min-width: 641px) and (max-width: 900px){
      #cardBoard{ grid-template-columns:repeat(3,1fr) }
    }

    /* Ø´Ø§Ø´Ø§Øª ÙƒØ¨ÙŠØ±Ø© Ø¬Ø¯Ù‹Ø§ (â‰¥ 1601px) */
    @media (min-width: 1601px){
      body{ font-size:2.2rem }
      .container{ max-width:min(1800px, 92vw) }
      .qcard{ min-height:320px }
      .qcard .centerMark .num{ font-size:6rem }
      .choice .thumb{ height:240px }
    }

    /* ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø³Ø¤Ø§Ù„: Ø­Ù…Ø§ÙŠØ© Ù‚ÙŠØ§Ø³Ø§Øª */
    #qModal{ padding:10px }
    #qBox{ max-width:100%; width:min(1020px, 96vw) }
    @supports (width: min(100%, 100%)){
      #qBox{ width:min(1020px, 96vw) }
    }

    /* Ø£Ù‡Ø¯Ø§Ù Ù„Ù…Ø³ Ù…Ø±ÙŠØ­Ø© Ù„Ù„Ø®ÙŠØ§Ø±Ø§Øª */
    .choice{ min-height: calc(200px + 3.2em) }

    /* iOS Safe Areas + ØªÙˆØ³Øª */
    @supports (padding: max(0px)){
      body{
        padding-inline: max(0px, env(safe-area-inset-left)) max(0px, env(safe-area-inset-right))
      }
      #toast{ top: max(24px, env(safe-area-inset-top)) }
    }

    /* Ø§Ø­ØªØ±Ø§Ù… ØªÙØ¶ÙŠÙ„ ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø­Ø±ÙƒØ© */
    @media (prefers-reduced-motion: reduce){
      *{
        animation-duration:.01ms !important;
        animation-iteration-count:1 !important;
        transition:none !important;
        scroll-behavior:auto !important;
      }
    }

    /* ØªØ¨Ø§ÙŠÙ† Ø£Ø¹Ù„Ù‰ Ù„Ù…Ù† ÙŠØ­ØªØ§Ø¬Ù‡ */
    @media (prefers-contrast: more){
      .chip,.pill{ border:1px solid #0c4a6e }
      .qcard{ box-shadow:none; border-width:3px }
    }


    /* ===== Ø¨Ø§ØªØ´ Ù…Ø±ÙˆÙ†Ø© Ø£Ù‚ÙˆÙ‰ Ù„Ù„Ø¬ÙˆØ§Ù„Ø§Øª (Ø£Ù„ØµÙ‚Ù‡ Ø£Ø³ÙÙ„ Ø§Ù„Ù…Ù„Ù) ===== */

/* 1) Ø®Ø· Ø³Ø§Ø¦Ù„ Ø¢Ù…Ù† Ù„Ù„Ø¬ÙˆØ§Ù„Ø§Øª Ø§Ù„Ø´Ø§Ø¦Ø¹Ø© (360â€“430px) */
@media (max-width: 430px){
  /* ÙŠÙ‚Ù„Ù‘Ù„ ØªØ¶Ø®ÙŠÙ… Ø§Ù„Ø®Ø· Ø§Ù„Ø¹Ø§Ù… */
  body{ font-size:1.1rem }
  /* ØªÙˆØ³Øª Ø£ØµØºØ± */
  #toast{ font-size:2rem; padding:10px 14px }
  /* HUD ÙŠÙ„Ù Ø¨Ø¯ÙˆÙ† Ø²Ø­Ù…Ø© */
  .hud{ gap:8px; font-size:1.1rem; flex-wrap:wrap }
  .hud .pill{ padding:8px 12px }
  /* Ø´Ø¨ÙƒØ© Ø¨Ø·Ø§Ù‚Ø§Øª Ø£Ø¯Ù‚ */
  #cardBoard{ grid-template-columns:repeat(2,1fr); gap:10px }
  .qcard{ min-height:170px; border-width:4px }
  .qcard .centerMark .num{ font-size:3rem }
  .qcard .centerMark img{ width:60px; height:60px }
  /* Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ Ø£Ù‚ØµØ± */
  #qBox{ width:94vw; max-height:78vh }
  .question{ font-size:1.8rem }
  .choice{ font-size:1.15rem }
  .choice .thumb{ height:120px }
}

/* 2) Ù‡ÙˆØ§ØªÙ ØµØºÙŠØ±Ø© Ø¬Ø¯Ù‹Ø§ (â‰¤ 360px) â€” Ø¹Ù…ÙˆØ¯ ÙˆØ§Ø­Ø¯ Ø¹Ù†Ø¯ Ø§Ù„Ø¶ÙŠÙ‚ Ø§Ù„Ø´Ø¯ÙŠØ¯ */
@media (max-width: 340px){
  /* ÙÙŠ Ù‡ÙˆØ§ØªÙ Ù‚Ø¯ÙŠÙ…Ø© Ø£Ùˆ ØªØµØºÙŠØ± Ù…ØªØµÙØ­ */
  #cardBoard{ grid-template-columns:1fr; gap:8px }
  .qcard{ min-height:160px }
  .choice .thumb{ height:110px }
}

/* 3) landscape Ø¹Ù„Ù‰ Ø¬ÙˆØ§Ù„Ø§Øª Ù‚ØµÙŠØ±Ø© Ø§Ù„Ø§Ø±ØªÙØ§Ø¹: Ø®ÙÙ‘Ø¶ ÙƒÙ„ Ø´ÙŠØ¡ Ø£ÙƒØ«Ø± */
@media (max-height: 520px) and (orientation: landscape){
  body{ font-size:1rem }
  .container{ padding:12px }
  .hud{ font-size:1rem; gap:6px }
  .progress{ height:10px }
  #cardBoard{ gap:8px }
  .qcard{ min-height:140px }
  #qBox{ max-height:74vh }
  .choice .thumb{ height:100px }
  #toast{ font-size:1.6rem }
}

/* 4) Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ù„Ø¹Ø¨Ø©: Ù…Ù†Ø¹ ÙƒØ³Ø± Ø¨Ø³Ø¨Ø¨ min-width Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¯Ø®Ù„ */
@media (max-width: 430px){
  .name-row input{
    min-width:0; width:100%; font-size:1rem; padding:12px 14px
  }
  .btn{ padding:12px 14px; font-size:1rem; border-radius:14px }
  .start-card{ padding:22px }
  .start-title{ font-size:2rem }
}

/* 5) ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ø³ØªØ¹Ù…Ø§Ù„ÙŠØ© ØµØºÙŠØ±Ø© */
@supports (padding: max(0px)){
  /* Ù„Ø§ ØªØ¬Ø¹Ù„ Ø§Ù„ØªÙˆØ³Øª ÙŠØµØ·Ø¯Ù… Ø¨Ø§Ù„Ù†ÙˆØªØ´ */
  #toast{ top: max(16px, env(safe-area-inset-top)) }
}
/* Ù‚Ù„Ù‘Ù„ Ø§Ù„Ø§Ù‡ØªØ²Ø§Ø² Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ø¶Ø¹ÙŠÙØ© Ù…Ø¹ ØªÙØ¶ÙŠÙ„ ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø­Ø±ÙƒØ© */
@media (prefers-reduced-motion: reduce){
  .shake{ animation-duration:.01ms !important }
}

.nav {
    display: flex
;
    position: relative;
    justify-content: space-between;
    flex-wrap: wrap;
}


  </style>
</head>
<body>
  <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© -->
  <section id="start" aria-modal="true">
    <div class="start-card">
      <div style="font-size:4rem">ğŸŒŸ</div>
      <h2 class="start-title">Ù„Ø¹Ø¨Ø© Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù…Ù…ØªØ¹Ø©</h2>
      <p class="start-sub">Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ø«Ù… Ø§Ø¶ØºØ· Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨</p>
      <div class="name-row">
        <input id="playerName" type="text" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ ÙŠØ§ Ø¨Ø·Ù„" />
        <button class="btn primary" id="goBtn">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨</button>
      </div>
    </div>
  </section>

  <div class="container" aria-live="polite">
      <div class="nav">
      <div><h1>ğŸ® Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø£Ø·ÙØ§Ù„ <span class="chip">Ø¨Ø·Ø§Ù‚Ø§Øª</span></h1></div>
      <div><p class="chip name">Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø·Ø§Ù„Ø¨: Ø¹Ø¨Ø¯Ø§Ù„Ø¹Ø²ÙŠØ² Ø§Ù„Ø­Ø¬Ø§Ø¨ - Ø¨Ø¥Ø´Ø±Ø§Ù Ø§Ù„Ù…Ø¹Ù„Ù…Ø©: ÙˆÙØ§Ø¡ Ø§Ù„Ø¨Ù„ÙˆÙŠ</p></div>
      </div>
    <section id="game" class="card" style="display:none">
      <div class="hud">
        <div class="pill" id="timer">â±ï¸ 00:00</div>
        <div class="pill" id="firstTry">âœ… Ø¨Ø·Ø§Ù‚Ø§Øª ØµØ­ÙŠØ­Ø©: 0</div>
        <div class="pill" id="wrongHud">âŒ Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø®Ø§Ø·Ø¦Ø©: 0</div>
        <div class="pill" id="qIndex">Ø¨Ø·Ø§Ù‚Ø§Øª Ù…ØªØ¨Ù‚ÙŠØ©: 0</div>
      </div>
      <div class="progress"><div id="progressBar"></div></div>
      <div id="cardBoard"></div>
      <div style="display:flex;justify-content:space-between;align-items:center;margin-top:16px;color:#64748b">
        <div>Ø§Ø®ØªØ± Ø¨Ø·Ø§Ù‚Ø©ØŒ Ø£Ø¬Ø¨ØŒ Ø¥Ù† ÙƒØ§Ù†Øª Ø®Ø§Ø·Ø¦Ø© Ø¬Ø±Ù‘Ø¨ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰. ØªØ®ØªÙÙŠ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©.</div>
        <button class="btn ghost" id="restart">ğŸ” Ø¥Ø¹Ø§Ø¯Ø©</button>
      </div>
    </section>

    <section id="result" class="card" style="display:none;text-align:center">
      <h2 id="resultTitle">ğŸ‰ Ø£Ø­Ø³Ù†Øª! Ù„Ù‚Ø¯ Ø£Ù†Ù‡ÙŠØª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª</h2>
      <p id="resultText">â€¦</p>
      <div class="stats">
        <div class="stat">â±ï¸ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ø³ØªØºØ±Ù‚: <b id="resultTime">00:00</b></div>
        <div class="stat">âœ… Ø¨Ø·Ø§Ù‚Ø§Øª ØµØ­ÙŠØ­Ø©: <b id="resultFirstTries">0</b></div>
        <div class="stat">ğŸ“š Ø¹Ø¯Ø¯ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª: <b id="resultTotal">0</b></div>
        <div class="stat">âŒ Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ø®Ø§Ø·Ø¦Ø©: <b id="resultWrongCount">0</b></div>
      </div>
      <div style="margin-top:28px;display:flex;gap:16px;justify-content:center">
        <button class="btn primary" id="playAgain">ğŸ¯ Ø§Ù„Ø¹Ø¨ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰</button>
      </div>
    </section>
  </div>

  <!-- Ù…ÙˆØ¯Ø§Ù„ Ø§Ù„Ø³Ø¤Ø§Ù„ -->
  <div id="qModal" aria-hidden="true">
    <div id="qBox" role="dialog" aria-labelledby="qTitle">
      <div id="qHead">
        <h3 id="qTitle">Ø§Ù„Ø³Ø¤Ø§Ù„</h3>
        <button class="btn ghost" id="closeModalBtn" title="Ø¥ØºÙ„Ø§Ù‚">âœ–</button>
      </div>
      <div id="qBody">
        <div class="question" id="questionText">â€¦</div>
        <div class="grid" id="choices"></div>
      </div>
    </div>
  </div>

  <!-- Toast -->
  <div id="toast" role="status" aria-live="polite"><span id="toastIcon">ğŸ‰</span><span id="toastMsg">...</span></div>

  <!-- ===== Ø·Ø¨Ù‚Ø© ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ù‡Ø¯ÙŠØ© + Ø§Ù„Ø¨Ø§Ù„ÙˆÙ†Ø§Øª ===== -->
  <div id="giftOverlay">
    <div class="gift-wrap">
      <div class="gift" aria-hidden="true">
        <div class="box"></div>
        <div class="lid"></div>
        <div class="ribbon-vert"></div>
        <div class="ribbon-horz"></div>
      </div>
      <div id="balloons"></div>
      <div class="gifts" id="giftEmojis">ğŸâœ¨ğŸ­â­ï¸ğŸ‰</div>
    </div>
  </div>

  <!-- ===== Ø£ØµÙˆØ§Øª Ù…Ø­Ù„ÙŠØ© ===== -->
  <audio id="sfxCorrect" preload="auto" src="sfx-correct.mp3"></audio>
  <audio id="sfxWrong"   preload="auto" src="sfx-wrong.mp3"></audio>

 <script>
  /* Ø£Ø¯ÙˆØ§Øª ØµØºÙŠØ±Ø© */
  function qs(s, r){return (r||document).querySelector(s)}
  function shuffle(arr){ const a = arr.slice(); for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]] } return a; }
  function rand(arr){return arr[Math.floor(Math.random()*arr.length)]}
  function esc(t){return String(t).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/"/g,'&quot;').replace(/'/g,'&#39;')}

  /* Ø«Ø§Ø¨Øª ÙˆØ§Ø­Ø¯ ÙÙ‚Ø· */
  const QUESTIONS_PER_ROUND = 6;

  /* Ø­Ø§Ù„Ø© Ø§Ù„Ù„Ø¹Ø¨Ø© */
  let QUESTIONS=[], CARDS=[], answered=0, correctCount=0, wrongAttempts=0, startAt=0, timerId=null, playerName='';

  /* Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© (ØµÙˆØ±Ø© Ù…Ø­Ù„ÙŠØ© Ø§Ø®ØªÙŠØ§Ø±ÙŠØ©) */
  const QMARK = "boy.png";

  /* Ù‚Ø§Ù…ÙˆØ³ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª */
  const ICONS = {
    "Ù‚Ø·Ø©":"https://cdn-icons-png.flaticon.com/128/1998/1998592.png","ÙƒÙ„Ø¨":"https://cdn-icons-png.flaticon.com/512/616/616408.png","Ø£Ø³Ø¯":"https://cdn-icons-png.flaticon.com/128/12541/12541334.png","Ù†Ù…Ø±":"https://cdn-icons-png.flaticon.com/128/1998/1998804.png","ÙÙŠÙ„":"https://cdn-icons-png.flaticon.com/128/7743/7743300.png","Ù‚Ø±Ø¯":"https://cdn-icons-png.flaticon.com/128/1998/1998721.png","Ø¨Ù‚Ø±Ø©":"https://cdn-icons-png.flaticon.com/512/616/616528.png","Ø­ØµØ§Ù†":"https://cdn-icons-png.flaticon.com/128/9537/9537923.png","Ø¬Ù…Ù„":"https://cdn-icons-png.flaticon.com/128/4215/4215091.png","Ø£Ø±Ù†Ø¨":"https://cdn-icons-png.flaticon.com/128/1998/1998765.png","Ø·Ø§Ø¦Ø±":"https://cdn-icons-png.flaticon.com/128/1230/1230870.png","Ø³Ù…ÙƒØ©":"https://cdn-icons-png.flaticon.com/128/2970/2970068.png","Ø¶ÙØ¯Ø¹":"https://cdn-icons-png.flaticon.com/128/8677/8677566.png","Ø¨Ø·Ø©":"https://cdn-icons-png.flaticon.com/128/2120/2120233.png","Ø¯Ø¨":"https://cdn-icons-png.flaticon.com/128/1047/1047479.png","ØªÙØ§Ø­":"https://cdn-icons-png.flaticon.com/512/415/415733.png","Ù…ÙˆØ²":"https://cdn-icons-png.flaticon.com/128/2909/2909761.png","Ø¨Ø±ØªÙ‚Ø§Ù„":"https://cdn-icons-png.flaticon.com/512/415/415734.png","Ø¹Ù†Ø¨":"https://cdn-icons-png.flaticon.com/128/5376/5376172.png","Ø¨Ø·ÙŠØ®":"https://cdn-icons-png.flaticon.com/128/5582/5582664.png","ÙØ±Ø§ÙˆÙ„Ø©":"https://cdn-icons-png.flaticon.com/128/7315/7315465.png","Ø£Ù†Ø§Ù†Ø§Ø³":"https://cdn-icons-png.flaticon.com/128/8692/8692265.png","Ù„ÙŠÙ…ÙˆÙ†":"https://cdn-icons-png.flaticon.com/512/415/415735.png","Ø¬Ø²Ø±":"https://cdn-icons-png.flaticon.com/128/3136/3136973.png","Ø·Ù…Ø§Ø·Ù…":"https://cdn-icons-png.flaticon.com/128/1790/1790387.png","Ø¨Ø·Ø§Ø·Ø³":"https://cdn-icons-png.flaticon.com/128/1652/1652127.png","ÙƒØªØ§Ø¨":"https://cdn-icons-png.flaticon.com/128/5832/5832416.png","Ù‚Ù„Ù…":"https://cdn-icons-png.flaticon.com/128/2493/2493530.png","Ù…Ù…Ø­Ø§Ø©":"https://cdn-icons-png.flaticon.com/128/776/776194.png","Ù…Ø³Ø·Ø±Ø©":"https://cdn-icons-png.flaticon.com/128/595/595732.png","Ù…Ù‚Øµ":"https://cdn-icons-png.flaticon.com/128/10363/10363577.png","Ù…Ø«Ù„Ø«":"https://cdn-icons-png.flaticon.com/128/9796/9796733.png","Ù…Ø±Ø¨Ø¹":"https://cdn-icons-png.flaticon.com/128/6038/6038682.png","Ø¯Ø§Ø¦Ø±Ø©":"https://cdn-icons-png.flaticon.com/128/5111/5111178.png","Ù†Ø¬Ù…Ø©":"https://cdn-icons-png.flaticon.com/512/1828/1828884.png","Ù‚Ù„Ø¨":"https://cdn-icons-png.flaticon.com/512/833/833472.png","Ù…Ø§Ø³Ø©":"https://cdn-icons-png.flaticon.com/128/408/408472.png","Ø³ÙŠØ§Ø±Ø©":"https://cdn-icons-png.flaticon.com/128/3097/3097180.png","Ø­Ø§ÙÙ„Ø©":"https://cdn-icons-png.flaticon.com/128/1068/1068631.png","Ù‚Ø·Ø§Ø±":"https://cdn-icons-png.flaticon.com/128/1974/1974098.png","Ø´Ø§Ø­Ù†Ø©":"https://cdn-icons-png.flaticon.com/128/870/870130.png","Ø¯Ø±Ø§Ø¬Ø©":"https://cdn-icons-png.flaticon.com/512/2972/2972185.png","Ø·Ø§Ø¦Ø±Ø©":"https://cdn-icons-png.flaticon.com/128/10521/10521422.png","Ø³ÙÙŠÙ†Ø©":"https://cdn-icons-png.flaticon.com/128/18098/18098671.png","Ù‡Ù„ÙŠÙƒÙˆØ¨ØªØ±":"https://cdn-icons-png.flaticon.com/128/3097/3097187.png","Ø´Ù…Ø³":"https://cdn-icons-png.flaticon.com/512/869/869869.png","Ù‚Ù…Ø±":"https://cdn-icons-png.flaticon.com/128/1823/1823397.png","Ø³Ø­Ø§Ø¨Ø©":"https://cdn-icons-png.flaticon.com/512/414/414825.png","Ù…Ø·Ø±":"https://cdn-icons-png.flaticon.com/128/8841/8841317.png","Ø«Ù„Ø¬":"https://cdn-icons-png.flaticon.com/512/414/414968.png","Ø´Ø¬Ø±Ø©":"https://cdn-icons-png.flaticon.com/128/490/490091.png","Ø²Ù‡Ø±Ø©":"https://cdn-icons-png.flaticon.com/128/11504/11504574.png","Ø¬Ø¨Ù„":"https://cdn-icons-png.flaticon.com/128/619/619010.png","ÙƒÙˆØ¨":"https://cdn-icons-png.flaticon.com/128/12974/12974286.png","ÙƒØ±Ø³ÙŠ":"https://cdn-icons-png.flaticon.com/128/607/607067.png","Ø·Ø§ÙˆÙ„Ø©":"https://cdn-icons-png.flaticon.com/128/607/607069.png","Ø³Ø±ÙŠØ±":"https://cdn-icons-png.flaticon.com/128/2283/2283945.png","Ø³Ø§Ø¹Ø©":"https://cdn-icons-png.flaticon.com/128/2997/2997985.png","Ù‡Ø§ØªÙ":"https://cdn-icons-png.flaticon.com/128/2482/2482945.png","Ù‚Ø¨Ø¹Ø©":"https://cdn-icons-png.flaticon.com/128/1974/1974214.png","Ù‚Ù…ÙŠØµ":"https://cdn-icons-png.flaticon.com/512/892/892457.png","Ø­Ø°Ø§Ø¡":"https://cdn-icons-png.flaticon.com/128/2742/2742687.png","Ø­Ù‚ÙŠØ¨Ø©":"https://cdn-icons-png.flaticon.com/128/3275/3275938.png","Ø¨ÙŠØªØ²Ø§":"https://cdn-icons-png.flaticon.com/512/3132/3132693.png","Ø¨Ø·Ø§Ø·Ø§_Ù…Ù‚Ù„ÙŠØ©":"https://cdn-icons-png.flaticon.com/128/1046/1046786.png","Ø¢ÙŠØ³ÙƒØ±ÙŠÙ…":"https://cdn-icons-png.flaticon.com/128/3157/3157358.png","ÙƒØ¹ÙƒØ©":"https://cdn-icons-png.flaticon.com/128/2682/2682340.png","Ø¨ÙŠØ¶Ø©":"https://cdn-icons-png.flaticon.com/128/2168/2168010.png","Ø®Ø¨Ø²":"","Ø·Ø¨ÙŠØ¨":"https://cdn-icons-png.flaticon.com/128/2785/2785482.png","Ø´Ø±Ø·ÙŠ":"https://cdn-icons-png.flaticon.com/128/3270/3270987.png","Ù…Ø¹Ù„Ù…Ø©":"https://cdn-icons-png.flaticon.com/128/5369/5369664.png","Ø·ÙŠØ§Ø±":"https://cdn-icons-png.flaticon.com/128/10750/10750979.png","Ø±Ø¬Ù„_Ø¥Ø·ÙØ§Ø¡":"https://cdn-icons-png.flaticon.com/128/950/950006.png"
  };

  /* Ø¨Ù†Ùƒ Ø£Ø³Ø¦Ù„Ø© Ø®Ø§Ù… (Ø¨Ø¯ÙˆÙ† map Ù…Ø³Ø¨Ù‚) */
  const QUESTIONS_POOL = [
    {"question":"Ù…Ø§ Ø§Ù„Ø­ÙŠÙˆØ§Ù† Ø§Ù„Ø°ÙŠ ÙŠÙ‚ÙˆÙ„ Ù…ÙŠÙˆÙˆÙˆØŸ","answers":[{"text":"Ù‚Ø·Ø©","isCorrect":true},{"text":"ÙƒÙ„Ø¨"},{"text":"Ø¨Ù‚Ø±Ø©"}]},
    {"question":"Ù…Ø§ Ø§Ù„Ø­ÙŠÙˆØ§Ù† Ø§Ù„Ø°ÙŠ ÙŠÙ†Ø¨Ø­ØŸ","answers":[{"text":"ÙƒÙ„Ø¨","isCorrect":true},{"text":"Ù‚Ø·Ø©"},{"text":"Ø³Ù…ÙƒØ©"}]},
    {"question":"Ù…Ù„Ùƒ Ø§Ù„ØºØ§Ø¨Ø© Ù‡ÙˆØŸ","answers":[{"text":"Ø£Ø³Ø¯","isCorrect":true},{"text":"Ù†Ù…Ø±"},{"text":"Ù‚Ø±Ø¯"}]},
    {"question":"Ø­ÙŠÙˆØ§Ù† Ù„Ù‡ Ø³Ù†Ø§Ù…ØŸ","answers":[{"text":"Ø¬Ù…Ù„","isCorrect":true},{"text":"Ø­ØµØ§Ù†"},{"text":"Ø¨Ù‚Ø±Ø©"}]},
    {"question":"Ø£ÙŠ Ø­ÙŠÙˆØ§Ù† ÙŠØ·ÙŠØ±ØŸ","answers":[{"text":"Ø·Ø§Ø¦Ø±","isCorrect":true},{"text":"Ù‚Ø·Ø©"},{"text":"Ø³Ù…ÙƒØ©"}]},
    {"question":"Ø£ÙŠ Ø­ÙŠÙˆØ§Ù† ÙŠØ¹ÙŠØ´ ÙÙŠ Ø§Ù„Ù…Ø§Ø¡ØŸ","answers":[{"text":"Ø³Ù…ÙƒØ©","isCorrect":true},{"text":"Ø£Ø³Ø¯"},{"text":"Ø£Ø±Ù†Ø¨"}]},
    {"question":"Ø£ÙŠ Ø­ÙŠÙˆØ§Ù† ÙŠÙ‚ÙØ² ÙˆÙ„Ù‡ Ø¬Ù„Ø¯ Ø±Ø·Ø¨ØŸ","answers":[{"text":"Ø¶ÙØ¯Ø¹","isCorrect":true},{"text":"Ø¨Ø·Ø©"},{"text":"Ù‚Ø±Ø¯"}]},
    {"question":"Ø£ÙŠ Ø­ÙŠÙˆØ§Ù† ÙŠÙ‚ÙˆÙ„ Ù…Ø§Ø¡ Ù…Ø§Ø¡ØŸ","answers":[{"text":"Ø¨Ø·Ø©","isCorrect":true},{"text":"Ø­ØµØ§Ù†"},{"text":"Ù‚Ø·Ø©"}]},
    {"question":"Ø£ÙŠ Ø­ÙŠÙˆØ§Ù† ÙŠÙØ­Ù„Ø¨ØŸ","answers":[{"text":"Ø¨Ù‚Ø±Ø©","isCorrect":true},{"text":"Ø£Ø³Ø¯"},{"text":"Ù†Ù…Ø±"}]},
    {"question":"Ø£ÙŠ Ø­ÙŠÙˆØ§Ù† Ø³Ø±ÙŠØ¹ Ù„Ù„Ø±ÙƒÙˆØ¨ØŸ","answers":[{"text":"Ø­ØµØ§Ù†","isCorrect":true},{"text":"Ù‚Ø±Ø¯"},{"text":"Ø£Ø±Ù†Ø¨"}]},
    {"question":"Ø£ÙŠ ÙØ§ÙƒÙ‡Ø© Ù„ÙˆÙ†Ù‡Ø§ Ø£ØµÙØ± ÙˆÙ…Ù†Ø­Ù†ÙŠØ© Ø§Ù„Ø´ÙƒÙ„ØŸ","answers":[{"text":"Ù…ÙˆØ²","isCorrect":true},{"text":"ØªÙØ§Ø­"},{"text":"ÙØ±Ø§ÙˆÙ„Ø©"}]},
    {"question":"Ø£ÙŠ ÙØ§ÙƒÙ‡Ø© Ø­Ù…Ø±Ø§Ø¡ ÙˆØ¨Ø°ÙˆØ±Ù‡Ø§ Ø¹Ù„Ù‰ Ø³Ø·Ø­Ù‡Ø§ØŸ","answers":[{"text":"ÙØ±Ø§ÙˆÙ„Ø©","isCorrect":true},{"text":"Ø¹Ù†Ø¨"},{"text":"Ø£Ù†Ø§Ù†Ø§Ø³"}]},
    {"question":"ÙØ§ÙƒÙ‡Ø© Ø¹Ù„Ù‰ Ø´ÙƒÙ„ Ø¹Ù†Ø§Ù‚ÙŠØ¯ØŸ","answers":[{"text":"Ø¹Ù†Ø¨","isCorrect":true},{"text":"ØªÙØ§Ø­"},{"text":"Ø¨Ø·ÙŠØ®"}]},
    {"question":"Ø£ÙŠ ÙØ§ÙƒÙ‡Ø© Ù‚Ø´Ø±ØªÙ‡Ø§ Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠØ©ØŸ","answers":[{"text":"Ø¨Ø±ØªÙ‚Ø§Ù„","isCorrect":true},{"text":"Ù„ÙŠÙ…ÙˆÙ†"},{"text":"Ù…ÙˆØ²"}]},
    {"question":"Ø£ÙŠ ÙØ§ÙƒÙ‡Ø© ÙƒØ¨ÙŠØ±Ø© Ø®Ø¶Ø±Ø§Ø¡ Ù…Ù† Ø§Ù„Ø®Ø§Ø±Ø¬ ÙˆØ­Ù…Ø±Ø§Ø¡ Ù…Ù† Ø§Ù„Ø¯Ø§Ø®Ù„ØŸ","answers":[{"text":"Ø¨Ø·ÙŠØ®","isCorrect":true},{"text":"ØªÙØ§Ø­"},{"text":"Ø¹Ù†Ø¨"}]},
    {"question":"Ø£ÙŠ ÙØ§ÙƒÙ‡Ø© ØµÙØ±Ø§Ø¡ ÙˆØ­Ø§Ù…Ø¶Ø©ØŸ","answers":[{"text":"Ù„ÙŠÙ…ÙˆÙ†","isCorrect":true},{"text":"ØªÙØ§Ø­"},{"text":"Ø£Ù†Ø§Ù†Ø§Ø³"}]},
    {"question":"Ø£ÙŠ Ø®Ø¶Ø§Ø± Ù„ÙˆÙ†Ù‡ Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠØŸ","answers":[{"text":"Ø¬Ø²Ø±","isCorrect":true},{"text":"Ø¨Ø·Ø§Ø·Ø³"},{"text":"Ø·Ù…Ø§Ø·Ù…"}]},
    {"question":"Ø£ÙŠ Ø®Ø¶Ø§Ø± Ù†Ø£ÙƒÙ„Ù‡ ÙÙŠ Ø§Ù„Ø¨Ø·Ø§Ø·Ø³ Ø§Ù„Ù…Ù‚Ù„ÙŠØ©ØŸ","answers":[{"text":"Ø¨Ø·Ø§Ø·Ø³","isCorrect":true},{"text":"Ø·Ù…Ø§Ø·Ù…"},{"text":"Ø¬Ø²Ø±"}]},
    {"question":"Ù†Ø³ØªØ®Ø¯Ù…Ù‡ Ù„Ù„ÙƒØªØ§Ø¨Ø©ØŸ","answers":[{"text":"Ù‚Ù„Ù…","isCorrect":true},{"text":"Ù…Ù…Ø­Ø§Ø©"},{"text":"Ù…Ù‚Øµ"}]},
    {"question":"Ù†Ø³ØªØ®Ø¯Ù…Ù‡Ø§ Ù„Ù…Ø³Ø­ Ø§Ù„ÙƒØªØ§Ø¨Ø©ØŸ","answers":[{"text":"Ù…Ù…Ø­Ø§Ø©","isCorrect":true},{"text":"Ù‚Ù„Ù…"},{"text":"Ù…Ø³Ø·Ø±Ø©"}]},
    {"question":"Ø£ÙŠ Ø£Ø¯Ø§Ø© Ù„Ù‚ÙŠØ§Ø³ Ø§Ù„Ø·ÙˆÙ„ØŸ","answers":[{"text":"Ù…Ø³Ø·Ø±Ø©","isCorrect":true},{"text":"Ù…Ù‚Øµ"},{"text":"ÙƒØªØ§Ø¨"}]},
    {"question":"Ù†Ù‚Ø·Ø¹ Ø§Ù„ÙˆØ±Ù‚ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡ØŸ","answers":[{"text":"Ù…Ù‚Øµ","isCorrect":true},{"text":"Ù‚Ù„Ù…"},{"text":"Ù…Ù…Ø­Ø§Ø©"}]},
    {"question":"Ù…Ø§ Ø§Ù„Ø°ÙŠ Ù†Ù‚Ø±Ø£Ù‡ØŸ","answers":[{"text":"ÙƒØªØ§Ø¨","isCorrect":true},{"text":"Ù‚Ù„Ù…"},{"text":"Ù…Ù‚Øµ"}]},
    {"question":"Ø£ÙŠ Ø´ÙƒÙ„ Ù„Ù‡ Ù¤ Ø£Ø¶Ù„Ø§Ø¹ Ù…ØªØ³Ø§ÙˆÙŠØ©ØŸ","answers":[{"text":"Ù…Ø±Ø¨Ø¹","isCorrect":true},{"text":"Ù…Ø«Ù„Ø«"},{"text":"Ø¯Ø§Ø¦Ø±Ø©"}]},
    {"question":"Ø£ÙŠ Ø´ÙƒÙ„ Ù„ÙŠØ³ Ù„Ù‡ Ø²ÙˆØ§ÙŠØ§ØŸ","answers":[{"text":"Ø¯Ø§Ø¦Ø±Ø©","isCorrect":true},{"text":"Ù…Ø±Ø¨Ø¹"},{"text":"Ù…Ø«Ù„Ø«"}]},
    {"question":"Ø£ÙŠ Ø´ÙƒÙ„ Ù„Ù‡ Ù£ Ø£Ø¶Ù„Ø§Ø¹ØŸ","answers":[{"text":"Ù…Ø«Ù„Ø«","isCorrect":true},{"text":"Ø¯Ø§Ø¦Ø±Ø©"},{"text":"Ù…Ø±Ø¨Ø¹"}]},
    {"question":"Ø±Ù…Ø² Ø§Ù„Ø­Ø¨ Ù‡ÙˆØŸ","answers":[{"text":"Ù‚Ù„Ø¨","isCorrect":true},{"text":"Ù†Ø¬Ù…Ø©"},{"text":"Ù…Ø§Ø³Ø©"}]},
    {"question":"Ø£ÙŠ ÙˆØ³ÙŠÙ„Ø© ØªØ³ÙŠØ± Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙƒÙƒ Ø§Ù„Ø­Ø¯ÙŠØ¯ÙŠØ©ØŸ","answers":[{"text":"Ù‚Ø·Ø§Ø±","isCorrect":true},{"text":"Ø³ÙŠØ§Ø±Ø©"},{"text":"Ø­Ø§ÙÙ„Ø©"}]},
    {"question":"Ø£ÙŠ ÙˆØ³ÙŠÙ„Ø© ØªØ·ÙŠØ± ÙÙŠ Ø§Ù„Ø³Ù…Ø§Ø¡ØŸ","answers":[{"text":"Ø·Ø§Ø¦Ø±Ø©","isCorrect":true},{"text":"Ø³ÙÙŠÙ†Ø©"},{"text":"Ø¯Ø±Ø§Ø¬Ø©"}]},
    {"question":"Ø£ÙŠ ÙˆØ³ÙŠÙ„Ø© ØªÙ…Ø´ÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ø·Ø±ÙŠÙ‚ ÙˆÙ„Ù‡Ø§ Ø£Ø±Ø¨Ø¹ Ø¹Ø¬Ù„Ø§ØªØŸ","answers":[{"text":"Ø³ÙŠØ§Ø±Ø©","isCorrect":true},{"text":"Ø³ÙÙŠÙ†Ø©"},{"text":"Ø·Ø§Ø¦Ø±Ø©"}]},
    {"question":"Ø£ÙŠ ÙˆØ³ÙŠÙ„Ø© ØªÙ†Ù‚Ù„ Ø§Ù„Ù†Ø§Ø³ Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©ØŸ","answers":[{"text":"Ø­Ø§ÙÙ„Ø©","isCorrect":true},{"text":"Ø·Ø§Ø¦Ø±Ø©"},{"text":"Ø¯Ø±Ø§Ø¬Ø©"}]},
    {"question":"Ø£ÙŠ ÙˆØ³ÙŠÙ„Ø© ØªØ³ÙŠØ± ÙÙˆÙ‚ Ø§Ù„Ø¨Ø­Ø±ØŸ","answers":[{"text":"Ø³ÙÙŠÙ†Ø©","isCorrect":true},{"text":"Ø·Ø§Ø¦Ø±Ø©"},{"text":"Ø³ÙŠØ§Ø±Ø©"}]},
    {"question":"Ù†Ù†Ø§Ù… Ø¹Ù„Ù‰ØŸ","answers":[{"text":"Ø³Ø±ÙŠØ±","isCorrect":true},{"text":"ÙƒØ±Ø³ÙŠ"},{"text":"Ø·Ø§ÙˆÙ„Ø©"}]},
    {"question":"Ù†Ø¬Ù„Ø³ Ø¹Ù„Ù‰ØŸ","answers":[{"text":"ÙƒØ±Ø³ÙŠ","isCorrect":true},{"text":"Ø³Ø±ÙŠØ±"},{"text":"ÙƒÙˆØ¨"}]},
    {"question":"Ù†Ø´Ø±Ø¨ Ø§Ù„Ù…Ø§Ø¡ ÙÙŠØŸ","answers":[{"text":"ÙƒÙˆØ¨","isCorrect":true},{"text":"ÙƒØªØ§Ø¨"},{"text":"Ù‡Ø§ØªÙ"}]},
    {"question":"Ù†Ø£ÙƒÙ„ Ø§Ù„Ø·Ø¹Ø§Ù… Ø¹Ù„Ù‰ØŸ","answers":[{"text":"Ø·Ø§ÙˆÙ„Ø©","isCorrect":true},{"text":"ÙƒØ±Ø³ÙŠ"},{"text":"ÙƒÙˆØ¨"}]},
    {"question":"Ù†Ø±Ù‰ Ø§Ù„ÙˆÙ‚Øª Ø¨ÙˆØ§Ø³Ø·Ø©ØŸ","answers":[{"text":"Ø³Ø§Ø¹Ø©","isCorrect":true},{"text":"Ù‡Ø§ØªÙ"},{"text":"ÙƒÙˆØ¨"}]},
    {"question":"Ù†Ø±ØªØ¯ÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ø±Ø£Ø³ØŸ","answers":[{"text":"Ù‚Ø¨Ø¹Ø©","isCorrect":true},{"text":"Ù‚Ù…ÙŠØµ"},{"text":"Ø­Ø°Ø§Ø¡"}]},
    {"question":"Ù†Ù„Ø¨Ø³ ÙÙŠ Ø§Ù„Ù‚Ø¯Ù…ÙŠÙ†ØŸ","answers":[{"text":"Ø­Ø°Ø§Ø¡","isCorrect":true},{"text":"Ù‚Ø¨Ø¹Ø©"},{"text":"Ø­Ù‚ÙŠØ¨Ø©"}]},
    {"question":"Ù†Ù„Ø¨Ø³ ÙÙŠ Ø§Ù„Ø¬Ø³Ù… Ø§Ù„Ø¹Ù„ÙˆÙŠØŸ","answers":[{"text":"Ù‚Ù…ÙŠØµ","isCorrect":true},{"text":"Ù‚Ø¨Ø¹Ø©"},{"text":"Ø­Ø°Ø§Ø¡"}]},
    {"question":"Ù†Ø¶Ø¹ Ø£ØºØ±Ø§Ø¶Ù†Ø§ ÙÙŠØŸ","answers":[{"text":"Ø­Ù‚ÙŠØ¨Ø©","isCorrect":true},{"text":"ÙƒÙˆØ¨"},{"text":"ÙƒØ±Ø³ÙŠ"}]},
    {"question":"Ø£ÙƒÙ„Ø© Ù…Ø³ØªØ¯ÙŠØ±Ø© Ù…Ø¹ Ø§Ù„Ø¬Ø¨Ù† ÙˆØªÙÙ‚Ø·Ø¹ Ù…Ø«Ù„Ø«Ø§ØªØŸ","answers":[{"text":"Ø¨ÙŠØªØ²Ø§","isCorrect":true},{"text":"ÙƒØ¹ÙƒØ©"},{"text":"Ø¨Ø·Ø§Ø·Ø§_Ù…Ù‚Ù„ÙŠØ©"}]},
    {"question":"Ø­Ù„ÙˆÙ‰ Ø¨Ø§Ø±Ø¯Ø© ÙÙŠ Ø§Ù„ØµÙŠÙØŸ","answers":[{"text":"Ø¢ÙŠØ³ÙƒØ±ÙŠÙ…","isCorrect":true},{"text":"ÙƒØ¹ÙƒØ©"},{"text":"Ø¨ÙŠØªØ²Ø§"}]},
    {"question":"Ù†Ø£ÙƒÙ„Ù‡Ø§ ÙÙŠ Ø§Ù„ÙØ±Ø­ Ø£Ùˆ Ø§Ù„Ù†Ø¬Ø§Ø­ØŸ","answers":[{"text":"ÙƒØ¹ÙƒØ©","isCorrect":true},{"text":"Ø¨ÙŠØªØ²Ø§"},{"text":"Ø¨Ø·Ø§Ø·Ø§_Ù…Ù‚Ù„ÙŠØ©"}]},
    {"question":"Ù†ØªÙ†Ø§ÙˆÙ„Ù‡Ø§ ÙÙŠ Ø§Ù„Ø¥ÙØ·Ø§Ø±ØŸ","answers":[{"text":"Ø¨ÙŠØ¶Ø©","isCorrect":true},{"text":"Ø¢ÙŠØ³ÙƒØ±ÙŠÙ…"},{"text":"ÙƒØ¹ÙƒØ©"}]},
    {"question":"Ù…Ù† ÙŠØ¹Ø§Ù„Ø¬ Ø§Ù„Ù…Ø±Ø¶Ù‰ØŸ","answers":[{"text":"Ø·Ø¨ÙŠØ¨","isCorrect":true},{"text":"Ø´Ø±Ø·ÙŠ"},{"text":"Ù…Ø¹Ù„Ù…Ø©"}]},
    {"question":"Ù…Ù† ÙŠØ¹Ù„Ù‘Ù… Ø§Ù„Ø·Ù„Ø§Ø¨ØŸ","answers":[{"text":"Ù…Ø¹Ù„Ù…Ø©","isCorrect":true},{"text":"Ø·ÙŠØ§Ø±"},{"text":"Ø´Ø±Ø·ÙŠ"}]},
    {"question":"Ù…Ù† ÙŠÙ‚ÙˆØ¯ Ø§Ù„Ø·Ø§Ø¦Ø±Ø©ØŸ","answers":[{"text":"Ø·ÙŠØ§Ø±","isCorrect":true},{"text":"Ø´Ø±Ø·ÙŠ"},{"text":"Ø·Ø¨ÙŠØ¨"}]},
    {"question":"Ù…Ù† ÙŠØ·ÙØ¦ Ø§Ù„Ù†Ø§Ø±ØŸ","answers":[{"text":"Ø±Ø¬Ù„_Ø¥Ø·ÙØ§Ø¡","isCorrect":true},{"text":"Ø·ÙŠØ§Ø±"},{"text":"Ù…Ø¹Ù„Ù…Ø©"}]},
    {"question":"Ù…Ù† ÙŠØ­Ø§ÙØ¸ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù…Ù†ØŸ","answers":[{"text":"Ø´Ø±Ø·ÙŠ","isCorrect":true},{"text":"Ø·Ø¨ÙŠØ¨"},{"text":"Ø±Ø¬Ù„_Ø¥Ø·ÙØ§Ø¡"}]},
    {"question":"ÙŠØ¸Ù‡Ø± ÙÙŠ Ø§Ù„Ù„ÙŠÙ„ØŸ","answers":[{"text":"Ù‚Ù…Ø±","isCorrect":true},{"text":"Ø´Ø¬Ø±Ø©"},{"text":"Ø¬Ø¨Ù„"}]},
    {"question":"ÙŠØ¸Ù‡Ø± ÙÙŠ Ø§Ù„Ù†Ù‡Ø§Ø±ØŸ","answers":[{"text":"Ø´Ù…Ø³","isCorrect":true},{"text":"Ø¨Ø­Ø±"},{"text":"ÙƒØ±Ø³ÙŠ"}]},
    {"question":"Ù…Ø§ Ø§Ù„Ø°ÙŠ ÙŠÙ†Ø²Ù„ Ù…Ù† Ø§Ù„Ø³Ù…Ø§Ø¡ Ø¹Ù†Ø¯Ù…Ø§ ØªÙ…Ø·Ø±ØŸ","answers":[{"text":"Ù…Ø·Ø±","isCorrect":true},{"text":"Ø«Ù„Ø¬"},{"text":"ØªØ±Ø§Ø¨"}]},
    {"question":"Ù…Ø§ Ø§Ù„Ø°ÙŠ ÙŠÙƒÙˆÙ† Ø£Ø¨ÙŠØ¶ ÙˆÙŠØ³Ù‚Ø· ÙÙŠ Ø§Ù„Ø´ØªØ§Ø¡ØŸ","answers":[{"text":"Ø«Ù„Ø¬","isCorrect":true},{"text":"Ù…Ø·Ø±"},{"text":"Ø´Ù…Ø³"}]}
  ];

  /* ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø¨Ù†Ùƒ + Ø¥Ù„Ø­Ø§Ù‚ Ø§Ù„ØµÙˆØ± + Ø¯ÙØ§Ø¹ÙŠØ© */
  const CLEAN_POOL = (QUESTIONS_POOL || [])
    .filter(q => q && typeof q.question === 'string' && Array.isArray(q.answers) && q.answers.length)
    .map(q => ({
      ...q,
      answers: q.answers
        .filter(a => a && typeof a.text === 'string')
        .map(a => ({ ...a, image: (ICONS[a.text] || a.image || undefined) }))
    }));

  /* HUD */
  const timerEl=qs('#timer'), firstTryEl=qs('#firstTry'), wrongHudEl=qs('#wrongHud'), qIndexEl=qs('#qIndex'), progressBar=qs('#progressBar');
  function fmtTime(ms){const s=Math.floor(ms/1000),m=Math.floor(s/60),r=s%60;return (m<10?'0'+m:m)+':'+(r<10?'0'+r:r)}
  function startTimer(){startAt=performance.now(); tick()}
  function tick(){timerEl.textContent='â±ï¸ '+fmtTime(performance.now()-startAt); timerId=requestAnimationFrame(tick)}
  function stopTimer(){ if(timerId) cancelAnimationFrame(timerId); timerId=null }

  /* Ø£ØµÙˆØ§Øª */
  const sfxOk  = document.getElementById('sfxCorrect');
  const sfxErr = document.getElementById('sfxWrong');
  function playSfx(el){ if(!el) return; try{ el.currentTime = 0; el.play(); }catch(e){} }

  /* ØªØ£Ø«ÙŠØ± ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ù‡Ø¯ÙŠØ© */
  function showGiftBox(next){
    const ov=document.getElementById('giftOverlay');
    const balloons=document.getElementById('balloons');
    const gift=ov && ov.querySelector('.gift');
    const emojis=document.getElementById('giftEmojis');
    if(!ov||!gift||!balloons||!emojis){ if(next) next(); return; }

    balloons.innerHTML='';
    emojis.classList.remove('run');
    gift.classList.remove('open');
    ov.style.display='flex';

    requestAnimationFrame(()=>{ gift.classList.add('open'); });

    const colors=['#ff8a80','#ffd54f','#81c784','#64b5f6','#ba68c8','#ffb74d'];
    const count=14+Math.floor(Math.random()*8);
    for(let i=0;i<count;i++){
      const b=document.createElement('div');
      b.className='balloon run';
      b.style.setProperty('--bcol', colors[i%colors.length]);
      b.style.left = (20 + Math.random()*60) + '%';
      b.style.setProperty('--dur', (1.6 + Math.random()*1.2)+'s');
      b.style.setProperty('--del', (0.05 + Math.random()*0.35)+'s');
      balloons.appendChild(b);
    }

    setTimeout(()=>{ emojis.classList.add('run'); }, 200);

    setTimeout(()=>{
      ov.style.display='none';
      gift.classList.remove('open');
      emojis.classList.remove('run');
      if(next) next();
    }, 1800);
  }

  function showHappy(){ const el=qs('#happyImg'); el && (el.style.display='block', setTimeout(()=>{ el.style.display='none'},1500)) }
  function showSad(){ const el=qs('#sadImg'); el && (el.style.display='block', setTimeout(()=>{ el.style.display='none'},900)) }
  function showClap(){ const el=qs('#clapOverlay'); el && (el.style.display='flex', setTimeout(()=>{ el.style.display='none'},1300)) }
  function celebrateRainbowStars(){
    const wrap=qs('#celebrate'), rainbow=qs('#rainbow'); if(!wrap||!rainbow) return;
    rainbow.classList.remove('rainbow-run'); void rainbow.offsetWidth; rainbow.classList.add('rainbow-run');
    Array.from(wrap.querySelectorAll('.star')).forEach(n=>n.remove());
    for(let i=0;i<18;i++){
      const s=document.createElement('div'); s.className='star';
      s.textContent=(Math.random()<0.33?'âœ¨':(Math.random()<0.5?'â­':'ğŸŒŸ'));
      s.style.left=Math.round(Math.random()*95)+'%'; s.style.top='-20px'; s.style.fontSize=(24+Math.random()*22)+'px';
      const delay=(Math.random()*0.3).toFixed(2)+'s', dur=(1.1+Math.random()*0.8).toFixed(2)+'s';
      s.style.animation='starFall '+dur+' ease-out '+delay+' forwards'; wrap.appendChild(s);
    }
    setTimeout(()=>{ Array.from(wrap.querySelectorAll('.star')).forEach(n=>n.remove()) }, 2200);
  }
  function showDanceBoy(){
    const el=qs('#danceBoy'); if(!el) return;
    el.style.display='block'; el.classList.remove('dance-run'); void el.offsetWidth; el.classList.add('dance-run');
    setTimeout(()=>{ el.style.display='none' },1650);
  }

  /* Toast */
  let toast=null, toastMsg=null, toastIcon=null, toastTimer=null;
  function setupToast(){ toast=qs('#toast'); toastMsg=qs('#toastMsg'); toastIcon=qs('#toastIcon'); }
  function showToast(message, kind){
    if(!toast) setupToast();
    toast.classList.remove('ok','err','toast-hide'); toast.classList.add(kind||'ok');
    toastMsg.textContent = message || ''; toastIcon.textContent = (kind==='err' ? 'ğŸ’¡' : 'ğŸ‰');
    toast.style.display='flex'; void toast.offsetWidth; toast.classList.add('toast-show');
    clearTimeout(toastTimer);
    toastTimer = setTimeout(()=>{ toast.classList.remove('toast-show'); toast.classList.add('toast-hide'); setTimeout(()=>{ toast.style.display='none' },240); },1400);
  }

  /* Ø§Ø®ØªÙŠØ§Ø± Ø£Ø³Ø¦Ù„Ø© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© â€” Ø¯ÙØ§Ø¹ÙŠ */
  function pickRandomQuestions(pool, n){
    const safe = (pool || [])
      .filter(q => q && Array.isArray(q.answers) && q.answers.length);

    const size = Math.min(Number.isFinite(n) ? n : 6, safe.length);
    const arr = shuffle(safe).slice(0, size);

    return arr.map(q => ({
      ...q,
      answers: shuffle((q && q.answers) ? q.answers : [])
    }));
  }

  /* Ø¨Ø·Ø§Ù‚Ø§Øª */
  function buildBoard(){
    const board=qs('#cardBoard'); board.innerHTML='';
    CARDS=QUESTIONS.map((q,idx)=>{
      const c=document.createElement('button'); c.className='qcard'; c.setAttribute('data-i',idx); c.setAttribute('aria-label','Ø¨Ø·Ø§Ù‚Ø© Ø±Ù‚Ù… '+(idx+1));
      c.innerHTML='<div class="centerMark"><div class="num">'+(idx+1)+'</div><img src="'+QMARK+'" alt="Ø¨Ø·Ø§Ù‚Ø©"></div>';
      c.onclick=function(){ openQuestion(idx,c) };
      board.appendChild(c); return c;
    });
    updateHud();
  }
  function updateHud(){
    const total=QUESTIONS.length, remain=total-answered;
    qs('#firstTry').textContent='âœ… Ø¨Ø·Ø§Ù‚Ø§Øª ØµØ­ÙŠØ­Ø©: '+correctCount;
    qs('#wrongHud').textContent='âŒ Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø®Ø§Ø·Ø¦Ø©: '+wrongAttempts;
    qs('#qIndex').textContent='Ø¨Ø·Ø§Ù‚Ø§Øª Ù…ØªØ¨Ù‚ÙŠØ©: '+remain;
    qs('#progressBar').style.width = Math.round((answered/Math.max(1,total))*100) + '%';
  }

  /* Ù…ÙˆØ¯Ø§Ù„ */
  function openQuestion(index, cardEl){
    const q=QUESTIONS[index]; if(!q) return;
    const modal=qs('#qModal'); const title=qs('#qTitle'); const qText=qs('#questionText'); const host=qs('#choices');
    title.textContent='Ø§Ù„Ø³Ø¤Ø§Ù„ #' + (index+1);
    qText.textContent=q.question;
    host.innerHTML='';
    (q.answers||[]).forEach(a=>{
      const src = ICONS[a.text] || a.image || '';
      const b=document.createElement('button'); b.className='choice'; b.type='button';
      const imgHtml = src ? '<img src="'+src+'" alt="'+esc(a.text)+'">' : 'ğŸ²';
      b.innerHTML='<div class="thumb">'+imgHtml+'</div><div class="label">'+esc(a.text)+'</div>';
      b.onclick=function(){ answerWithRetries(b, !!a.isCorrect, cardEl, index) };
      host.appendChild(b);
    });
    modal.style.display='flex'; modal.setAttribute('aria-hidden','false'); document.body.style.overflow='hidden';
  }
  function closeModal(){ const modal=qs('#qModal'); modal.style.display='none'; modal.setAttribute('aria-hidden','true'); document.body.style.overflow=''; }
  qs('#closeModalBtn') && (qs('#closeModalBtn').onclick=closeModal);
  document.addEventListener('keydown',e=>{ if(e.key==='Escape') closeModal(); });

  /* Ù…Ù†Ø·Ù‚ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© */
  function answerWithRetries(btn, ok, cardEl){
    const choicesWrap=qs('#choices');
    if(ok){
      choicesWrap.querySelectorAll('.choice').forEach(ch=>{ ch.disabled=true });
      btn.classList.add('is-correct'); cardEl.classList.add('correct');
      correctCount++; answered++;
      playSfx(sfxOk);
      showToast(rand(['Ø±Ø§Ø¦Ø¹ ÙŠØ§ Ø¨Ø·Ù„!','Ù…Ù…ØªØ§Ø²! Ø§Ø³ØªÙ…Ø± ğŸ‘','ÙŠØ§ Ø³Ù„Ø§Ù…! Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø© ğŸŒŸ']), 'ok');

      showGiftBox(function(){
        if(cardEl && cardEl.parentNode){ cardEl.classList.add('done'); cardEl.remove(); }
        updateHud(); closeModal();
        if(answered >= QUESTIONS.length){ finish(); }
      });

    }else{
      btn.classList.add('is-wrong','shake');
      btn.disabled=true;
      setTimeout(()=>{ btn.classList.remove('shake') }, 350);
      wrongAttempts++;
      playSfx(sfxErr);
      showToast(rand(['Ù„Ø§ Ø¨Ø£Ø³ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ ÙŠØ§ Ø¨Ø·Ù„! ğŸ’ª','Ù„Ø§ ØªÙŠØ£Ø³ ÙŠØ§ Ø¨Ø·Ù„ØŒ Ø³ØªÙ†Ø¬Ø­! ğŸŒŸ','Ø£Ù†Øª Ù‚Ø§Ø¯Ø± Ø¹Ù„ÙŠÙ‡Ø§! Ø¬Ø±Ù‘Ø¨ Ù…Ø¬Ø¯Ø¯Ù‹Ø§! ğŸ™Œ']), 'err');
      setTimeout(()=>{ updateHud(); btn.disabled=false; }, 900);
    }
  }

  function finish(){
    stopTimer();
    const total=QUESTIONS.length||1;
    qs('#resultTime').textContent=fmtTime(performance.now()-startAt);
    qs('#resultFirstTries').textContent=correctCount;
    qs('#resultTotal').textContent=total;
    qs('#resultWrongCount').textContent=wrongAttempts;
    const congrats = playerName ? ('ğŸ‰ Ø£Ø­Ø³Ù†Øª ÙŠØ§ '+playerName+'!') : 'ğŸ‰ Ø£Ø­Ø³Ù†Øª!';
    qs('#resultTitle').textContent = congrats + ' Ù„Ù‚Ø¯ Ø£Ù†Ù‡ÙŠØª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª';
    qs('#resultText').textContent = (wrongAttempts===0) ? 'Ù…Ø°Ù‡Ù„! Ù„Ù… ØªÙØ®Ø·Ø¦ Ø£ÙŠ Ù…Ø­Ø§ÙˆÙ„Ø© ğŸ‘' : 'Ø¹Ù…Ù„ Ø±Ø§Ø¦Ø¹! Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø¹Ù„Ù…ØªÙ†Ø§ Ø§Ù„Ø·Ø±ÙŠÙ‚ Ø§Ù„ØµØ­ÙŠØ­ ğŸ’ª';
    qs('#game').style.display='none';
    qs('#result').style.display='block';
  }

  /* Ø¨Ø¯Ø¡/Ø¥Ø¹Ø§Ø¯Ø© â€” ØªØ³ØªØ®Ø¯Ù… CLEAN_POOL */
  function startWithCurrentSettings(){
    QUESTIONS = pickRandomQuestions(CLEAN_POOL, QUESTIONS_PER_ROUND);
  }

  document.getElementById('goBtn').onclick=function(){
    playerName = (document.getElementById('playerName').value||'Ø¨Ø·Ù„ÙŠ').trim();
    if(sfxOk){ try{ sfxOk.play().then(()=>{sfxOk.pause(); sfxOk.currentTime=0;}).catch(()=>{});}catch(e){} }
    if(sfxErr){ try{ sfxErr.play().then(()=>{sfxErr.pause(); sfxErr.currentTime=0;}).catch(()=>{});}catch(e){} }

    startWithCurrentSettings();
    answered=0; correctCount=0; wrongAttempts=0;
    document.getElementById('start').style.display='none';
    document.getElementById('result').style.display='none';
    document.getElementById('game').style.display='block';
    buildBoard(); stopTimer(); startTimer();
  };

  /* ØªØ´ØºÙŠÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø± */
  function test(){
    playerName = (document.getElementById('playerName').value||'Ø¨Ø·Ù„ÙŠ').trim();
    if(sfxOk){ try{ sfxOk.play().then(()=>{sfxOk.pause(); sfxOk.currentTime=0;}).catch(()=>{});}catch(e){} }
    if(sfxErr){ try{ sfxErr.play().then(()=>{sfxErr.pause(); sfxErr.currentTime=0;}).catch(()=>{});}catch(e){} }

    startWithCurrentSettings();
    answered=0; correctCount=0; wrongAttempts=0;
    document.getElementById('start').style.display='none';
    document.getElementById('result').style.display='none';
    document.getElementById('game').style.display='block';
    buildBoard(); stopTimer(); startTimer();
  };
  test();

  document.getElementById('restart').onclick=function(){
    startWithCurrentSettings();
    answered=0; correctCount=0; wrongAttempts=0;
    buildBoard(); stopTimer(); startTimer();
  };

  document.getElementById('playAgain').onclick=function(){
    document.getElementById('result').style.display='none';
    document.getElementById('game').style.display='block';
    startWithCurrentSettings();
    answered=0; correctCount=0; wrongAttempts=0;
    buildBoard(); stopTimer(); startTimer();
  };
 </script>
</body>
</html>





